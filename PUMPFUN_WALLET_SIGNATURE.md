# PumpFun é’±åŒ…ç­¾åæµç¨‹æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é€šè¿‡**é’±åŒ…ç­¾å**çš„æ–¹å¼åˆ›å»º PumpFun ä»£å¸ï¼Œè€Œä¸æ˜¯ç›´æ¥æä¾›ç§é’¥ã€‚è¿™æ˜¯æ›´å®‰å…¨çš„æ–¹å¼ï¼Œæ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚

## ä¸ºä»€ä¹ˆä½¿ç”¨é’±åŒ…ç­¾åï¼Ÿ

### å®‰å…¨ä¼˜åŠ¿

1. **ç§é’¥ä¸ç¦»å¼€ç”¨æˆ·è®¾å¤‡**: ç§é’¥å§‹ç»ˆä¿å­˜åœ¨ç”¨æˆ·çš„é’±åŒ…ä¸­ï¼Œä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“
2. **é™ä½é£é™©**: å³ä½¿ API æœåŠ¡å™¨è¢«æ”»å‡»ï¼Œé»‘å®¢ä¹Ÿæ— æ³•è·å–ç”¨æˆ·ç§é’¥
3. **ç”¨æˆ·å¯æ§**: ç”¨æˆ·å¯ä»¥åœ¨é’±åŒ…ä¸­æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…å¹¶å†³å®šæ˜¯å¦ç­¾å
4. **ç¬¦åˆæœ€ä½³å®è·µ**: éµå¾ª Web3 åº”ç”¨çš„æ ‡å‡†å®‰å…¨å®è·µ

### ä¸æ—§æ–¹å¼çš„å¯¹æ¯”

| æ–¹å¼ | å®‰å…¨æ€§ | ç”¨æˆ·ä½“éªŒ | æ¨èç¨‹åº¦ |
|------|--------|----------|----------|
| ç›´æ¥ä¼ é€’ç§é’¥ | âŒ ä½ | ğŸ˜Š ç®€å• | âš ï¸ ä»…æµ‹è¯•ç¯å¢ƒ |
| é’±åŒ…ç­¾å | âœ… é«˜ | ğŸ˜Š æ ‡å‡† | âœ… ç”Ÿäº§ç¯å¢ƒæ¨è |

## å·¥ä½œæµç¨‹

### æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯      â”‚      â”‚   åç«¯API   â”‚      â”‚  Solanaé“¾   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                     â”‚
       â”‚ 1. å‡†å¤‡äº¤æ˜“è¯·æ±‚    â”‚                     â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
       â”‚    (é’±åŒ…å…¬é’¥)       â”‚                     â”‚
       â”‚                    â”‚                     â”‚
       â”‚                    â”‚ 2. ä¸Šä¼ å…ƒæ•°æ®åˆ°IPFS â”‚
       â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                    â”‚                     â”‚
       â”‚                    â”‚ 3. åˆ›å»ºäº¤æ˜“         â”‚
       â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                    â”‚                     â”‚
       â”‚                    â”‚ 4. Mintéƒ¨åˆ†ç­¾å     â”‚
       â”‚                    â”‚   (ç¬¬ä¸€ä¸ªç­¾å)      â”‚
       â”‚                    â”‚                     â”‚
       â”‚ 5. è¿”å›å¾…ç­¾åäº¤æ˜“  â”‚                     â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
       â”‚  (å«Mintéƒ¨åˆ†ç­¾å)  â”‚                     â”‚
       â”‚                    â”‚                     â”‚
       â”‚ 6. ç”¨æˆ·é’±åŒ…ç­¾å    â”‚                     â”‚
       â”‚   (ç¬¬äºŒä¸ªç­¾å)     â”‚                     â”‚
       â”‚   é’±åŒ…å¼¹çª—ç¡®è®¤     â”‚                     â”‚
       â”‚                    â”‚                     â”‚
       â”‚ 7. æäº¤å®Œæ•´ç­¾åäº¤æ˜“â”‚                     â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
       â”‚                    â”‚                     â”‚
       â”‚                    â”‚ 8. å‘é€äº¤æ˜“åˆ°é“¾     â”‚
       â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                    â”‚                     â”‚
       â”‚                    â”‚ 9. ç­‰å¾…ç¡®è®¤         â”‚
       â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                    â”‚                     â”‚
       â”‚ 10. è¿”å›äº¤æ˜“ç»“æœ   â”‚                     â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
       â”‚                    â”‚                     â”‚
```

### å…³é”®æŠ€æœ¯ç‚¹ï¼šå¤šé‡ç­¾åé¡ºåº

**é‡è¦**: PumpFun ä»£å¸åˆ›å»ºéœ€è¦**ä¸¤ä¸ªç­¾åè€…**ï¼š

1. **Mint Keypair ç­¾å** (ç”±æœåŠ¡å™¨å®Œæˆ)
   - æœåŠ¡å™¨ç”Ÿæˆéšæœº mint keypair
   - ä½¿ç”¨ `tx.sign([mintKeypair])` è¿›è¡Œéƒ¨åˆ†ç­¾å
   - è¿™æ˜¯äº¤æ˜“çš„**ç¬¬ä¸€ä¸ªç­¾å**

2. **ç”¨æˆ·é’±åŒ…ç­¾å** (ç”±å‰ç«¯é’±åŒ…å®Œæˆ)
   - ç”¨æˆ·é’±åŒ…æ¥æ”¶å·²æœ‰ mint ç­¾åçš„äº¤æ˜“
   - é’±åŒ…æ·»åŠ ç”¨æˆ·çš„ç­¾åä½œä¸º**ç¬¬äºŒä¸ªç­¾å**
   - ä½¿ç”¨ `signTransaction()` æ–¹æ³•

**ç­¾åé¡ºåºå¿…é¡»æ­£ç¡®**ï¼š
- âœ… æ­£ç¡®: Mint ç­¾å â†’ ç”¨æˆ·ç­¾å
- âŒ é”™è¯¯: ç”¨æˆ·ç­¾å â†’ Mint ç­¾å (ä¼šå¯¼è‡´äº¤æ˜“å¤±è´¥)

Solana çš„ `VersionedTransaction.sign()` æ–¹æ³•ä¼šæ­£ç¡®å¤„ç†éƒ¨åˆ†ç­¾åï¼Œç¡®ä¿åç»­é’±åŒ…ç­¾åèƒ½å¤ŸæˆåŠŸæ·»åŠ ã€‚

## API ç«¯ç‚¹

### æ–¹å¼å¯¹æ¯”

| ç«¯ç‚¹ | æ–¹å¼ | ä½¿ç”¨åœºæ™¯ | å®‰å…¨æ€§ | æ¨èåº¦ |
|------|------|---------|--------|--------|
| `/api/pumpfun/create-with-private-key` | ç›´æ¥ç§é’¥ | è‡ªåŠ¨åŒ–ã€æµ‹è¯•ã€åå°ä»»åŠ¡ | âš ï¸ ä½ | âš ï¸ è°¨æ… |
| `/api/pumpfun/prepare` + `/api/pumpfun/submit` | é’±åŒ…ç­¾å | å‰ç«¯ç”¨æˆ·äº¤äº’ | âœ… é«˜ | âœ… æ¨è |

### 1. ä½¿ç”¨ç§é’¥ç›´æ¥åˆ›å»ºä»£å¸ï¼ˆå¿«é€Ÿæ–¹å¼ï¼‰

**POST** `/api/pumpfun/create-with-private-key`

ç›´æ¥ä½¿ç”¨é’±åŒ…ç§é’¥åˆ›å»ºä»£å¸ï¼Œä¸€æ­¥å®Œæˆã€‚é€‚åˆè‡ªåŠ¨åŒ–è„šæœ¬å’Œåå°ä»»åŠ¡ã€‚

#### è¯·æ±‚ä½“

```json
{
  "walletPrivateKey": "your-private-key-base58",
  "tokenMetadata": {
    "name": "My Token",
    "symbol": "MTK",
    "description": "This is my awesome token",
    "twitter": "https://twitter.com/mytoken",
    "telegram": "https://t.me/mytoken",
    "website": "https://mytoken.com",
    "showName": true
  },
  "imageUrl": "https://example.com/token-logo.png",
  "initialBuyAmount": 0.1,
  "slippage": 10,
  "priorityFee": 0.0005
}
```

#### å“åº”

```json
{
  "success": true,
  "signature": "5J7Z...3x8K",
  "txUrl": "https://solscan.io/tx/5J7Z...3x8K",
  "mintAddress": "9vN2...7Qxm"
}
```

**è­¦å‘Š**: æ­¤æ–¹å¼éœ€è¦å°†ç§é’¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä»…é€‚åˆï¼š
- âœ… è‡ªåŠ¨åŒ–è„šæœ¬å’Œæœºå™¨äºº
- âœ… åå°ä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡
- âœ… æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ
- âœ… ä¸“ç”¨è´¦æˆ·æˆ–æœåŠ¡è´¦æˆ·

**ä¸é€‚åˆ**:
- âŒ ç”¨æˆ·çš„ä¸»é’±åŒ…
- âŒ å…¬ç½‘ç¯å¢ƒä¸­çš„ç”¨æˆ·
- âŒ ç”Ÿäº§ç¯å¢ƒçš„ç”¨æˆ·äº¤äº’

### 2. éªŒè¯ç§é’¥æ ¼å¼

**POST** `/api/pumpfun/validate-private-key`

åœ¨æäº¤å‰éªŒè¯ç§é’¥æ ¼å¼æ˜¯å¦æœ‰æ•ˆã€‚

#### è¯·æ±‚ä½“

```json
{
  "privateKey": "your-private-key-base58"
}
```

#### å“åº”

```json
{
  "valid": true,
  "message": "ç§é’¥æ ¼å¼æœ‰æ•ˆ"
}
```

### 3. å‡†å¤‡åˆ›å»ºä»£å¸äº¤æ˜“

**POST** `/api/pumpfun/prepare`

è·å–å¾…ç­¾åçš„äº¤æ˜“æ•°æ®ã€‚

#### è¯·æ±‚ä½“

```json
{
  "walletPublicKey": "your-wallet-public-key",
  "tokenMetadata": {
    "name": "My Token",
    "symbol": "MTK",
    "description": "This is my awesome token",
    "twitter": "https://twitter.com/mytoken",
    "telegram": "https://t.me/mytoken",
    "website": "https://mytoken.com",
    "showName": true
  },
  "imageUrl": "https://example.com/token-logo.png",
  "initialBuyAmount": 0.1,
  "slippage": 10,
  "priorityFee": 0.0005
}
```

#### å“åº”

```json
{
  "success": true,
  "transaction": "base64-encoded-transaction",
  "mintAddress": "9vN2...7Qxm",
  "mintPrivateKey": "mint-private-key-base58"
}
```

**é‡è¦**: `mintPrivateKey` éœ€è¦ä¸´æ—¶ä¿å­˜åœ¨å‰ç«¯ï¼Œç”¨äºç¬¬äºŒæ­¥æäº¤æ—¶éªŒè¯ã€‚

### 4. æäº¤å·²ç­¾åçš„äº¤æ˜“

**POST** `/api/pumpfun/submit`

æäº¤ç”¨æˆ·ç­¾ååçš„äº¤æ˜“ï¼ˆé’±åŒ…ç­¾åæ–¹å¼çš„ç¬¬äºŒæ­¥ï¼‰ã€‚

#### è¯·æ±‚ä½“

```json
{
  "signedTransaction": "base64-encoded-signed-transaction",
  "mintAddress": "9vN2...7Qxm"
}
```

#### å“åº”

```json
{
  "success": true,
  "signature": "5J7Z...3x8K",
  "txUrl": "https://solscan.io/tx/5J7Z...3x8K",
  "mintAddress": "9vN2...7Qxm"
}
```

## å‰ç«¯é›†æˆç¤ºä¾‹

### ç§é’¥ç›´æ¥åˆ›å»ºæ–¹å¼ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰

#### Node.js è„šæœ¬ç¤ºä¾‹

```typescript
import axios from 'axios';

async function createTokenWithPrivateKey() {
  const apiBaseUrl = 'http://localhost:7000';
  const jwtToken = 'your-jwt-token';

  // æ­¥éª¤ 1: éªŒè¯ç§é’¥æ ¼å¼ï¼ˆå¯é€‰ï¼‰
  const validateResponse = await axios.post(
    `${apiBaseUrl}/api/pumpfun/validate-private-key`,
    {
      privateKey: 'your-private-key-base58',
    },
    {
      headers: {
        'Authorization': `Bearer ${jwtToken}`,
      },
    }
  );

  if (!validateResponse.data.valid) {
    console.error('ç§é’¥æ ¼å¼æ— æ•ˆ');
    return;
  }

  // æ­¥éª¤ 2: ç›´æ¥åˆ›å»ºä»£å¸
  try {
    const createResponse = await axios.post(
      `${apiBaseUrl}/api/pumpfun/create-with-private-key`,
      {
        walletPrivateKey: 'your-private-key-base58',
        tokenMetadata: {
          name: 'My Automated Token',
          symbol: 'AUTO',
          description: 'è¿™æ˜¯ä¸€ä¸ªè‡ªåŠ¨åˆ›å»ºçš„ä»£å¸',
          twitter: 'https://twitter.com/mytoken',
          telegram: 'https://t.me/mytoken',
        },
        imageUrl: 'https://example.com/token-logo.png',
        initialBuyAmount: 0.1,
        slippage: 10,
        priorityFee: 0.0005,
      },
      {
        headers: {
          'Authorization': `Bearer ${jwtToken}`,
        },
      }
    );

    if (createResponse.data.success) {
      console.log('âœ… ä»£å¸åˆ›å»ºæˆåŠŸ!');
      console.log('äº¤æ˜“é“¾æ¥:', createResponse.data.txUrl);
      console.log('Mint åœ°å€:', createResponse.data.mintAddress);
      console.log('ç­¾å:', createResponse.data.signature);
    } else {
      console.error('âŒ ä»£å¸åˆ›å»ºå¤±è´¥:', createResponse.data.error);
    }
  } catch (error) {
    console.error('âŒ è¯·æ±‚å¤±è´¥:', error.message);
  }
}

// è¿è¡Œè„šæœ¬
createTokenWithPrivateKey();
```

#### Python è„šæœ¬ç¤ºä¾‹

```python
import requests
import json

API_BASE_URL = 'http://localhost:7000'
JWT_TOKEN = 'your-jwt-token'

def create_token_with_private_key():
    # æ­¥éª¤ 1: éªŒè¯ç§é’¥æ ¼å¼
    validate_response = requests.post(
        f'{API_BASE_URL}/api/pumpfun/validate-private-key',
        json={'privateKey': 'your-private-key-base58'},
        headers={'Authorization': f'Bearer {JWT_TOKEN}'}
    )

    if not validate_response.json()['valid']:
        print('âŒ ç§é’¥æ ¼å¼æ— æ•ˆ')
        return

    # æ­¥éª¤ 2: åˆ›å»ºä»£å¸
    create_response = requests.post(
        f'{API_BASE_URL}/api/pumpfun/create-with-private-key',
        json={
            'walletPrivateKey': 'your-private-key-base58',
            'tokenMetadata': {
                'name': 'My Python Token',
                'symbol': 'PYT',
                'description': 'é€šè¿‡ Python è„šæœ¬åˆ›å»ºçš„ä»£å¸',
            },
            'imageUrl': 'https://example.com/token-logo.png',
            'initialBuyAmount': 0.1,
            'slippage': 10,
            'priorityFee': 0.0005,
        },
        headers={'Authorization': f'Bearer {JWT_TOKEN}'}
    )

    result = create_response.json()
    if result['success']:
        print('âœ… ä»£å¸åˆ›å»ºæˆåŠŸ!')
        print(f"äº¤æ˜“é“¾æ¥: {result['txUrl']}")
        print(f"Mint åœ°å€: {result['mintAddress']}")
    else:
        print(f"âŒ ä»£å¸åˆ›å»ºå¤±è´¥: {result['error']}")

# è¿è¡Œè„šæœ¬
create_token_with_private_key()
```

### React + Phantom é’±åŒ…ç¤ºä¾‹ï¼ˆé’±åŒ…ç­¾åæ–¹å¼ï¼‰

```typescript
import { Connection, VersionedTransaction } from '@solana/web3.js';
import { useWallet } from '@solana/wallet-adapter-react';

const CreateTokenComponent = () => {
  const { publicKey, signTransaction } = useWallet();

  const createToken = async () => {
    if (!publicKey || !signTransaction) {
      alert('è¯·å…ˆè¿æ¥é’±åŒ…');
      return;
    }

    try {
      // æ­¥éª¤ 1: å‡†å¤‡äº¤æ˜“
      const prepareResponse = await fetch('/api/pumpfun/prepare', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${yourJwtToken}`,
        },
        body: JSON.stringify({
          walletPublicKey: publicKey.toBase58(),
          tokenMetadata: {
            name: 'My Token',
            symbol: 'MTK',
            description: 'This is my awesome token',
          },
          initialBuyAmount: 0.1,
        }),
      });

      const prepareData = await prepareResponse.json();

      if (!prepareData.success) {
        throw new Error(prepareData.error);
      }

      // æ­¥éª¤ 2: ååºåˆ—åŒ–äº¤æ˜“
      const txBuffer = Buffer.from(prepareData.transaction, 'base64');
      const transaction = VersionedTransaction.deserialize(txBuffer);

      // æ­¥éª¤ 3: ç”¨æˆ·ç­¾åï¼ˆä¼šå¼¹å‡ºé’±åŒ…ç¡®è®¤çª—å£ï¼‰
      const signedTransaction = await signTransaction(transaction);

      // æ­¥éª¤ 4: æäº¤ç­¾ååçš„äº¤æ˜“
      const submitResponse = await fetch('/api/pumpfun/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${yourJwtToken}`,
        },
        body: JSON.stringify({
          signedTransaction: Buffer.from(signedTransaction.serialize()).toString('base64'),
          mintAddress: prepareData.mintAddress,
        }),
      });

      const submitData = await submitResponse.json();

      if (submitData.success) {
        console.log('ä»£å¸åˆ›å»ºæˆåŠŸ!');
        console.log('äº¤æ˜“é“¾æ¥:', submitData.txUrl);
        console.log('Mint åœ°å€:', submitData.mintAddress);
      } else {
        throw new Error(submitData.error);
      }
    } catch (error) {
      console.error('åˆ›å»ºä»£å¸å¤±è´¥:', error);
    }
  };

  return (
    <button onClick={createToken}>
      åˆ›å»ºä»£å¸
    </button>
  );
};
```

### Vue 3 + Solana Wallet Adapter ç¤ºä¾‹

```vue
<template>
  <button @click="createToken">åˆ›å»ºä»£å¸</button>
</template>

<script setup lang="ts">
import { useWallet } from 'solana-wallets-vue';
import { Connection, VersionedTransaction } from '@solana/web3.js';

const { publicKey, signTransaction } = useWallet();

const createToken = async () => {
  if (!publicKey.value || !signTransaction.value) {
    alert('è¯·å…ˆè¿æ¥é’±åŒ…');
    return;
  }

  try {
    // æ­¥éª¤ 1: å‡†å¤‡äº¤æ˜“
    const prepareResponse = await fetch('/api/pumpfun/prepare', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${yourJwtToken}`,
      },
      body: JSON.stringify({
        walletPublicKey: publicKey.value.toBase58(),
        tokenMetadata: {
          name: 'My Token',
          symbol: 'MTK',
          description: 'This is my awesome token',
        },
        initialBuyAmount: 0.1,
      }),
    });

    const prepareData = await prepareResponse.json();

    if (!prepareData.success) {
      throw new Error(prepareData.error);
    }

    // æ­¥éª¤ 2: ååºåˆ—åŒ–äº¤æ˜“
    const txBuffer = Buffer.from(prepareData.transaction, 'base64');
    const transaction = VersionedTransaction.deserialize(txBuffer);

    // æ­¥éª¤ 3: ç”¨æˆ·ç­¾å
    const signedTransaction = await signTransaction.value(transaction);

    // æ­¥éª¤ 4: æäº¤ç­¾ååçš„äº¤æ˜“
    const submitResponse = await fetch('/api/pumpfun/submit', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${yourJwtToken}`,
      },
      body: JSON.stringify({
        signedTransaction: Buffer.from(signedTransaction.serialize()).toString('base64'),
        mintAddress: prepareData.mintAddress,
      }),
    });

    const submitData = await submitResponse.json();

    if (submitData.success) {
      console.log('ä»£å¸åˆ›å»ºæˆåŠŸ!');
      console.log('äº¤æ˜“é“¾æ¥:', submitData.txUrl);
    }
  } catch (error) {
    console.error('åˆ›å»ºä»£å¸å¤±è´¥:', error);
  }
};
</script>
```

### åŸç”Ÿ JavaScript ç¤ºä¾‹

```javascript
// éœ€è¦å…ˆå®‰è£… @solana/web3.js å’Œ bs58
import { Connection, VersionedTransaction, PublicKey } from '@solana/web3.js';

async function createTokenWithWallet() {
  // å‡è®¾ä½ å·²ç»è¿æ¥äº† Phantom é’±åŒ…
  const provider = window.solana;

  if (!provider || !provider.isPhantom) {
    alert('è¯·å®‰è£… Phantom é’±åŒ…');
    return;
  }

  // è¿æ¥é’±åŒ…
  await provider.connect();
  const walletPublicKey = provider.publicKey.toString();

  // æ­¥éª¤ 1: å‡†å¤‡äº¤æ˜“
  const prepareResponse = await fetch('http://localhost:7000/api/pumpfun/prepare', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${yourJwtToken}`,
    },
    body: JSON.stringify({
      walletPublicKey: walletPublicKey,
      tokenMetadata: {
        name: 'My Token',
        symbol: 'MTK',
        description: 'This is my awesome token',
      },
      initialBuyAmount: 0.1,
    }),
  });

  const prepareData = await prepareResponse.json();

  if (!prepareData.success) {
    throw new Error(prepareData.error);
  }

  // æ­¥éª¤ 2: ååºåˆ—åŒ–äº¤æ˜“
  const txBuffer = Buffer.from(prepareData.transaction, 'base64');
  const transaction = VersionedTransaction.deserialize(txBuffer);

  // æ­¥éª¤ 3: ç”¨æˆ·ç­¾åï¼ˆPhantom é’±åŒ…ä¼šå¼¹çª—ï¼‰
  const signedTransaction = await provider.signTransaction(transaction);

  // æ­¥éª¤ 4: æäº¤ç­¾ååçš„äº¤æ˜“
  const submitResponse = await fetch('http://localhost:7000/api/pumpfun/submit', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${yourJwtToken}`,
    },
    body: JSON.stringify({
      signedTransaction: Buffer.from(signedTransaction.serialize()).toString('base64'),
      mintAddress: prepareData.mintAddress,
    }),
  });

  const submitData = await submitResponse.json();

  if (submitData.success) {
    console.log('ä»£å¸åˆ›å»ºæˆåŠŸ!');
    console.log('äº¤æ˜“é“¾æ¥:', submitData.txUrl);
    console.log('Mint åœ°å€:', submitData.mintAddress);

    // æ‰“å¼€ Solscan æŸ¥çœ‹äº¤æ˜“
    window.open(submitData.txUrl, '_blank');
  } else {
    throw new Error(submitData.error);
  }
}
```

## å¸¸è§é’±åŒ…é›†æˆ

### Phantom é’±åŒ…

```javascript
// æ£€æµ‹æ˜¯å¦å®‰è£…
if (window.solana && window.solana.isPhantom) {
  // è¿æ¥é’±åŒ…
  await window.solana.connect();

  // è·å–å…¬é’¥
  const publicKey = window.solana.publicKey.toString();

  // ç­¾åäº¤æ˜“
  const signedTx = await window.solana.signTransaction(transaction);
}
```

### Solflare é’±åŒ…

```javascript
// è¿æ¥é’±åŒ…
await window.solflare.connect();

// è·å–å…¬é’¥
const publicKey = window.solflare.publicKey.toString();

// ç­¾åäº¤æ˜“
const signedTx = await window.solflare.signTransaction(transaction);
```

### @solana/wallet-adapter (æ¨è)

è¿™æ˜¯æœ€é€šç”¨çš„æ–¹å¼ï¼Œæ”¯æŒå¤šä¸ªé’±åŒ…ï¼š

```bash
npm install @solana/wallet-adapter-react @solana/wallet-adapter-wallets
```

```typescript
import { useWallet } from '@solana/wallet-adapter-react';

const { publicKey, signTransaction } = useWallet();
```

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

#### 1. ç”¨æˆ·æ‹’ç»ç­¾å

```javascript
try {
  const signedTransaction = await signTransaction(transaction);
} catch (error) {
  if (error.message.includes('User rejected')) {
    alert('æ‚¨æ‹’ç»äº†äº¤æ˜“ç­¾å');
  }
}
```

#### 2. é’±åŒ…æœªè¿æ¥

```javascript
if (!publicKey) {
  alert('è¯·å…ˆè¿æ¥é’±åŒ…');
  return;
}
```

#### 3. ä½™é¢ä¸è¶³

```javascript
const prepareData = await prepareResponse.json();
if (!prepareData.success && prepareData.error.includes('insufficient')) {
  alert('é’±åŒ…ä½™é¢ä¸è¶³ï¼Œè¯·ç¡®ä¿æœ‰è¶³å¤Ÿçš„ SOL');
}
```

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **éªŒè¯äº¤æ˜“å†…å®¹**:
   - ç”¨æˆ·åº”è¯¥åœ¨é’±åŒ…ä¸­æ£€æŸ¥äº¤æ˜“è¯¦æƒ…
   - ç¡®è®¤æ¥æ”¶åœ°å€å’Œé‡‘é¢

2. **ä½¿ç”¨ HTTPS**:
   - ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
   - é˜²æ­¢ä¸­é—´äººæ”»å‡»

3. **ä¸è¦ä¿å­˜ mintPrivateKey**:
   - mintPrivateKey åªåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨
   - äº¤æ˜“å®Œæˆååº”è¯¥ä¸¢å¼ƒ

4. **é”™è¯¯å¤„ç†**:
   - å¦¥å–„å¤„ç†æ‰€æœ‰å¯èƒ½çš„é”™è¯¯
   - å‘ç”¨æˆ·æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æ¶ˆæ¯

5. **ç½‘ç»œé€‰æ‹©**:
   - ç¡®ä¿é’±åŒ…å’Œ API ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œï¼ˆMainnet/Devnetï¼‰
   - æµ‹è¯•æ—¶ä½¿ç”¨ Devnet

## æµ‹è¯•æµç¨‹

### ä½¿ç”¨ Devnet æµ‹è¯•

1. å°† `SOLANA_RPC_ENDPOINT` è®¾ç½®ä¸º Devnet:
   ```bash
   SOLANA_RPC_ENDPOINT=https://api.devnet.solana.com
   ```

2. è·å– Devnet SOL:
   - è®¿é—® https://faucet.solana.com
   - è¾“å…¥ä½ çš„é’±åŒ…åœ°å€
   - é¢†å–æµ‹è¯• SOL

3. åˆ‡æ¢é’±åŒ…åˆ° Devnet:
   - Phantom: è®¾ç½® â†’ å¼€å‘è€…è®¾ç½® â†’ æµ‹è¯•ç½‘ç»œ â†’ Devnet
   - Solflare: è®¾ç½® â†’ ç½‘ç»œ â†’ Devnet

4. æµ‹è¯•åˆ›å»ºä»£å¸

## å¯¹æ¯”ï¼šæ—§æ–¹å¼ vs æ–°æ–¹å¼

### æ—§æ–¹å¼ï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ï¼‰

```typescript
// âŒ ä¸å®‰å…¨ï¼šç§é’¥é€šè¿‡ç½‘ç»œä¼ è¾“
const response = await fetch('/api/pumpfun/create', {
  method: 'POST',
  body: JSON.stringify({
    walletPrivateKey: 'your-private-key', // å±é™©ï¼
    // ...å…¶ä»–å‚æ•°
  }),
});
```

### æ–°æ–¹å¼ï¼ˆæ¨èï¼‰

```typescript
// âœ… å®‰å…¨ï¼šåªä¼ é€’å…¬é’¥ï¼Œç§é’¥ç•™åœ¨é’±åŒ…ä¸­
const prepareResponse = await fetch('/api/pumpfun/prepare', {
  method: 'POST',
  body: JSON.stringify({
    walletPublicKey: publicKey.toBase58(), // å®‰å…¨
    // ...å…¶ä»–å‚æ•°
  }),
});

// ç”¨æˆ·åœ¨é’±åŒ…ä¸­ç­¾å
const signedTx = await signTransaction(transaction);

// æäº¤ç­¾ååçš„äº¤æ˜“
await fetch('/api/pumpfun/submit', {
  method: 'POST',
  body: JSON.stringify({
    signedTransaction: base64SignedTx,
    mintAddress: mintAddress,
  }),
});
```

## æŠ€æœ¯ç»†èŠ‚ï¼šVersionedTransaction éƒ¨åˆ†ç­¾å

### åç«¯ç­¾åå®ç°ï¼ˆæ–¹æ¡ˆ Bï¼‰

å½“å‰å®ç°é‡‡ç”¨ Solana çš„ `VersionedTransaction.sign()` æ–¹æ³•è¿›è¡Œéƒ¨åˆ†ç­¾åï¼š

```typescript
// æœåŠ¡å™¨ç«¯ä»£ç 
const tx = VersionedTransaction.deserialize(new Uint8Array(txData));

// ä½¿ç”¨ mint keypair è¿›è¡Œéƒ¨åˆ†ç­¾å
tx.sign([mintKeypair]); // ç¬¬ä¸€ä¸ªç­¾å

// åºåˆ—åŒ–åŒ…å«éƒ¨åˆ†ç­¾åçš„äº¤æ˜“
const serializedTx = Buffer.from(tx.serialize()).toString('base64');
```

**å…³é”®ç‚¹**:
- `tx.sign()` ä¼šæ·»åŠ ç­¾ååˆ°äº¤æ˜“çš„ signatures æ•°ç»„
- åºåˆ—åŒ–åçš„äº¤æ˜“åŒ…å« mint çš„ç­¾å
- å‰ç«¯é’±åŒ…è°ƒç”¨ `signTransaction()` æ—¶ä¼šæ·»åŠ ç¬¬äºŒä¸ªç­¾å
- ä¸¤ä¸ªç­¾åéƒ½ä¼šä¿ç•™åœ¨æœ€ç»ˆäº¤æ˜“ä¸­

### é’±åŒ…å…¼å®¹æ€§

æ­¤æ–¹æ¡ˆå·²åœ¨ä»¥ä¸‹é’±åŒ…æµ‹è¯•é€šè¿‡ï¼š
- âœ… Phantom Wallet (v23.0+)
- âœ… Solflare (v1.0+)
- âœ… Backpack
- âœ… @solana/wallet-adapter (é€šç”¨é€‚é…å™¨)

**å·¥ä½œåŸç†**:
1. é’±åŒ…çš„ `signTransaction()` æ–¹æ³•ä¼šæ£€æµ‹åˆ°äº¤æ˜“å·²æœ‰éƒ¨åˆ†ç­¾å
2. é’±åŒ…ä¼šæ·»åŠ ç”¨æˆ·çš„ç­¾åè€Œä¸æ˜¯æ›¿æ¢ç°æœ‰ç­¾å
3. æœ€ç»ˆäº¤æ˜“åŒ…å«ä¸¤ä¸ªæœ‰æ•ˆç­¾åï¼šmint ç­¾å + ç”¨æˆ·ç­¾å

### æ½œåœ¨é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### é—®é¢˜ 1: ç­¾åé¡ºåºé”™è¯¯

**ç—‡çŠ¶**: äº¤æ˜“æäº¤å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯åŒ…å« "signature verification failed"

**åŸå› **: Solana è¦æ±‚ç­¾åæŒ‰ç…§è´¦æˆ·åœ¨äº¤æ˜“ä¸­å‡ºç°çš„é¡ºåºæ’åˆ—

**è§£å†³**: å½“å‰å®ç°ç¡®ä¿ mint keypair å…ˆç­¾åï¼ˆæœåŠ¡å™¨ç«¯ï¼‰ï¼Œç”¨æˆ·é’±åŒ…åç­¾åï¼ˆå‰ç«¯ï¼‰ï¼Œç¬¦åˆ PumpPortal API çš„è¦æ±‚

#### é—®é¢˜ 2: é’±åŒ…æ‹’ç»ç­¾åå·²éƒ¨åˆ†ç­¾åçš„äº¤æ˜“

**ç—‡çŠ¶**: é’±åŒ…å¼¹å‡ºé”™è¯¯æˆ–æ‹’ç»ç­¾å

**åŸå› **: æŸäº›æ—§ç‰ˆæœ¬é’±åŒ…å¯èƒ½ä¸æ”¯æŒéƒ¨åˆ†ç­¾åçš„äº¤æ˜“

**è§£å†³**: å»ºè®®ç”¨æˆ·æ›´æ–°é’±åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨ @solana/wallet-adapter

#### é—®é¢˜ 3: åºåˆ—åŒ–åç­¾åä¸¢å¤±

**ç—‡çŠ¶**: æäº¤äº¤æ˜“æ—¶æç¤ºç¼ºå°‘ç­¾å

**åŸå› **: åºåˆ—åŒ–/ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ç­¾åä¸¢å¤±

**è§£å†³**: ä½¿ç”¨ `VersionedTransaction.serialize()` å’Œ `VersionedTransaction.deserialize()` ç¡®ä¿ç­¾åä¿ç•™

## FAQ

### Q: ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ª API è°ƒç”¨ï¼Ÿ

A: ç¬¬ä¸€ä¸ªè°ƒç”¨å‡†å¤‡äº¤æ˜“å¹¶æ·»åŠ  mint ç­¾åï¼Œç¬¬äºŒä¸ªè°ƒç”¨æäº¤ç”¨æˆ·ç­¾ååçš„å®Œæ•´äº¤æ˜“ã€‚è¿™æ ·å¯ä»¥è®©ç”¨æˆ·åœ¨æœ¬åœ°é’±åŒ…ä¸­ç­¾åï¼Œè€Œä¸æ˜¯å°†ç§é’¥å‘é€åˆ°æœåŠ¡å™¨ã€‚

### Q: mintPrivateKey æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦è¿”å›å®ƒï¼Ÿ

A: è¿™æ˜¯ä»£å¸çš„ mint è´¦æˆ·ç§é’¥ã€‚è™½ç„¶æœåŠ¡å™¨å·²ç»ç”¨å®ƒç­¾åäº†ï¼Œä½†å‰ç«¯ä»éœ€è¦çŸ¥é“ mint åœ°å€ç”¨äºéªŒè¯ã€‚æ³¨æ„ï¼š**ä¸è¦é•¿æœŸä¿å­˜æ­¤ç§é’¥**ï¼Œä»…åœ¨åˆ›å»ºæµç¨‹ä¸­ä½¿ç”¨ã€‚

### Q: ç­¾åå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. âœ… é’±åŒ…æ˜¯å¦è¿æ¥å¹¶è§£é”
2. âœ… ç½‘ç»œæ˜¯å¦æ­£ç¡®ï¼ˆMainnet/Devnet åŒ¹é…ï¼‰
3. âœ… ä½™é¢æ˜¯å¦è¶³å¤Ÿï¼ˆè‡³å°‘ 0.1 SOL + äº¤æ˜“è´¹ç”¨ï¼‰
4. âœ… äº¤æ˜“æ˜¯å¦å·²è¿‡æœŸï¼ˆSolana äº¤æ˜“æœ‰æ•ˆæœŸçº¦ 2 åˆ†é’Ÿï¼‰
5. âœ… é’±åŒ…ç‰ˆæœ¬æ˜¯å¦ä¸ºæœ€æ–°

### Q: å¦‚ä½•éªŒè¯äº¤æ˜“åŒ…å«ä¸¤ä¸ªç­¾åï¼Ÿ

A: åœ¨æäº¤å‰æ£€æŸ¥äº¤æ˜“ç­¾åæ•°é‡ï¼š

```typescript
const tx = VersionedTransaction.deserialize(txBuffer);
console.log('ç­¾åæ•°é‡:', tx.signatures.length); // åº”è¯¥ä¸º 2

// æ£€æŸ¥æ¯ä¸ªç­¾åæ˜¯å¦æœ‰æ•ˆ
tx.signatures.forEach((sig, i) => {
  const isValid = sig.every(byte => byte !== 0);
  console.log(`ç­¾å ${i + 1} æœ‰æ•ˆ:`, isValid);
});
```

### Q: éƒ¨åˆ†ç­¾åä¸å®Œæ•´ç­¾åçš„åŒºåˆ«ï¼Ÿ

A:
- **éƒ¨åˆ†ç­¾å**: äº¤æ˜“éœ€è¦å¤šä¸ªç­¾åè€…ï¼Œå½“å‰åªå®Œæˆäº†éƒ¨åˆ†ç­¾åï¼ˆå¦‚åªæœ‰ mint ç­¾åï¼‰
- **å®Œæ•´ç­¾å**: æ‰€æœ‰å¿…éœ€çš„ç­¾åè€…éƒ½å·²ç­¾åï¼Œäº¤æ˜“å¯ä»¥æäº¤åˆ°é“¾ä¸Š
- PumpFun åˆ›å»ºéœ€è¦ 2 ä¸ªç­¾åï¼šmint + ç”¨æˆ·é’±åŒ…

### Q: ç§é’¥æ–¹å¼å’Œé’±åŒ…ç­¾åæ–¹å¼çš„åŒºåˆ«ï¼Ÿ

A:
| æ–¹é¢ | ç§é’¥æ–¹å¼ | é’±åŒ…ç­¾åæ–¹å¼ |
|------|---------|-----------|
| ç«¯ç‚¹ | `/api/pumpfun/create-with-private-key` | `/api/pumpfun/prepare` + `/api/pumpfun/submit` |
| æ­¥éª¤æ•° | 1 æ­¥ | 2 æ­¥ |
| é€Ÿåº¦ | å¿«é€Ÿ | ç•¥æ…¢ï¼ˆéœ€ç”¨æˆ·äº¤äº’ï¼‰ |
| å®‰å…¨æ€§ | âš ï¸ ä½ï¼ˆç§é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼‰ | âœ… é«˜ï¼ˆç§é’¥åœ¨å®¢æˆ·ç«¯ï¼‰ |
| ä½¿ç”¨åœºæ™¯ | è‡ªåŠ¨åŒ–è„šæœ¬ã€åå°ä»»åŠ¡ | ç”¨æˆ·ç•Œé¢äº¤äº’ |
| æ¨èåº¦ | âš ï¸ è°¨æ…ä½¿ç”¨ | âœ… ç”Ÿäº§ç¯å¢ƒæ¨è |

### Q: ä½•æ—¶åº”è¯¥ä½¿ç”¨ç§é’¥æ–¹å¼ï¼Ÿ

A: ä»…åœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ç§é’¥æ–¹å¼ï¼š
- âœ… **è‡ªåŠ¨åŒ–æœºå™¨äºº**: æ‰¹é‡åˆ›å»ºä»£å¸çš„è‡ªåŠ¨åŒ–è„šæœ¬
- âœ… **åå°ä»»åŠ¡**: å®šæ—¶åˆ›å»ºä»£å¸çš„æœåŠ¡
- âœ… **æµ‹è¯•ç¯å¢ƒ**: å¼€å‘å’Œæµ‹è¯•é˜¶æ®µ
- âœ… **æœåŠ¡è´¦æˆ·**: ä¸“ç”¨çš„ç³»ç»Ÿè´¦æˆ·ï¼ˆéç”¨æˆ·è´¦æˆ·ï¼‰

### Q: ä¸ºä»€ä¹ˆä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ç§é’¥æ–¹å¼ï¼Ÿ

A: ä¸»è¦é£é™©åŒ…æ‹¬ï¼š
1. **ä¼ è¾“é£é™©**: ç§é’¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°æœåŠ¡å™¨
2. **å­˜å‚¨é£é™©**: æœåŠ¡å™¨å¯èƒ½è¢«æ”»å‡»å¯¼è‡´ç§é’¥æ³„éœ²
3. **ä¸­é—´äººæ”»å‡»**: HTTP/HTTPS é…ç½®ä¸å½“å¯èƒ½å¯¼è‡´ç§é’¥æˆªè·
4. **æ—¥å¿—æ³„éœ²**: ç§é’¥å¯èƒ½è¢«è®°å½•åœ¨æ—¥å¿—ä¸­
5. **ç”¨æˆ·ä¿¡ä»»**: ç”¨æˆ·éœ€è¦ä¿¡ä»»æœåŠ¡å™¨ä¸ä¼šç›—å–ç§é’¥

**å»ºè®®**: å¯¹äºç”¨æˆ·é¢å‘çš„åº”ç”¨ï¼Œå§‹ç»ˆä½¿ç”¨é’±åŒ…ç­¾åæ–¹å¼ï¼

### Q: å¦‚ä½•å®‰å…¨åœ°ä¿å­˜ç§é’¥ï¼Ÿ

A: å¦‚æœå¿…é¡»ä½¿ç”¨ç§é’¥æ–¹å¼ï¼š
1. **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç **: ä½¿ç”¨ç¯å¢ƒå˜é‡
2. **ä½¿ç”¨åŠ å¯†**: å¯¹ç§é’¥è¿›è¡ŒåŠ å¯†å­˜å‚¨
3. **é™åˆ¶è®¿é—®**: ä½¿ç”¨ HTTPSã€é˜²ç«å¢™ç­‰
4. **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰ç§é’¥ä½¿ç”¨
5. **å®šæœŸè½®æ¢**: å®šæœŸæ›´æ¢ç§é’¥
6. **æœ€å°æƒé™**: ä½¿ç”¨ä¸“ç”¨è´¦æˆ·ï¼Œé™åˆ¶èµ„é‡‘é¢åº¦

## æ€»ç»“

é’±åŒ…ç­¾åæµç¨‹æä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡å°†ç§é’¥ä¿ç•™åœ¨ç”¨æˆ·çš„é’±åŒ…ä¸­ï¼Œæˆ‘ä»¬éµå¾ªäº† Web3 åº”ç”¨çš„æœ€ä½³å®‰å…¨å®è·µã€‚

**æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤æ–¹å¼ï¼**
